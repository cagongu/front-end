<!-- Tab panes -->
<div class="tab-pane" id="manage" role="tabpanel" aria-labelledby="manage-tab">
    <style>
        .tabulator-row.done-background {
            background-color: #4caf5029 !important
        }

        .tabulator-row.cancel-background {
            background-color: #eeeeee82 !important
        }

        .tabulator-row.enable-background {
            background-color: #ff57220f !important
        }
    </style>
    <div style="margin-top: 30px;" row>
        <div class="header-item">
            <h4 class="title-item">
                Quản lý danh sách phòng
                <i *ngIf="dormitory && dormitory.length > 0" class="des">Tất cả danh sách phòng trong
                    {{dormitory[index].typeOfRental + " " + dormitory[index].name}}</i>
            </h4>
            <div style="display: flex">

                <button class="add-round" data-bs-toggle="modal" data-bs-target="#addRoom">
                    <span data-bs-toggle="tooltip" data-bs-placement="left" title="Thêm phòng">
                        <i class="fa-solid fa-plus"></i>
                    </span>
                </button>

                <div class="d-flex" style="margin-left: 40px;">
                    <div class="dropdown">
                        <button style="height: 100%" class="btn btn-primary dropdown-toggle" type="button"
                            id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                            <i data-feather="file-text"> </i>
                            Ẩn/Hiện cột
                            <span id="count_exclude_column"
                                style="position: absolute;top: -12px;right: -10px;background-color: #dc3545;font-size: 12px;width: 20px;height: 20px;display: flex;align-items: center;justify-content: center;border-radius: 5px;color: #fff;">0</span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="list-show-column">
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="group_id"
                                        value="group_id"> Nhóm
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="depositAmount"
                                        value="depositAmount"> Mức tiền cọc
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="debt_amount"
                                        value="debt_amount"> Tiền nợ
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="customers"
                                        value="customers"> Khách thuê
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="circle_day"
                                        value="circle_day"> Ngày lập hóa đơn
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="circle_month"
                                        value="circle_month"> Chu kỳ thu tiền
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="date_join"
                                        value="date_join"> Ngày vào ở
                                </label>
                            </li>
                            <li>
                                <label class="dropdown-item">
                                    <input type="checkbox" checked class="form-check-input" name="date_terminate"
                                        value="date_terminate"> Thời hạn hợp
                                    đồng
                                </label>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- table list room -->
        <div class="body-item">
            <table class="table  table-bordered">
                <thead>
                    <tr>
                        <th scope="col"></th>
                        <th scope="col"></th>
                        <th scope="col">Tên phòng</th>
                        <th scope="col">Giá thuê</th>
                        <th scope="col">Ngày lập hóa đơn</th>
                        <th scope="col">
                            kỳ thu tiền</th>
                        <th scope="col">Ngày vào ở</th>
                        <th scope="col">Thời hạn hợp đồng</th>
                        <th scope="col">Tình trạng</th>
                        <th scope="col">Tài chính</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody *ngIf="dormitory && dormitory.length > 0">
                    <ng-container *ngFor="let room of dormitory[index].rooms">
                        <tr *ngIf="floorNumber !== room.floorNumber">
                            <!-- Gọi hàm để thay đổi floorNumber -->
                            <th colspan="11">Tầng {{ room.floorNumber }}</th>
                            {{updateFloorNumber(room.floorNumber)}}
                        </tr>
                        <tr>
                            <th scope="row">{{ room.roomNumber }}</th>
                            <td><i class="fa-solid fa-door-open"></i></td>
                            <td>{{ room.roomName }}</td>
                            <td>{{ room.rentalPrice | currency: 'VND' }}</td> <!-- Định dạng giá tiền -->
                            <td>{{ room.invoiceDate ? (room.invoiceDate) : 'Chưa có' }}</td>
                            <!-- Định dạng ngày -->
                            <td>{{ room.billingCycle }} tháng</td>
                            <td>{{ room.moveInDate ? (room.moveInDate | date: 'dd/MM/yyyy') : 'Chưa có' }}</td>
                            <!-- Định dạng ngày -->
                            <td>{{ room.contractDuration }} tháng</td>
                            <td [ngSwitch]="room.status">
                                <span *ngSwitchCase="'OCCUPIED'">Đang ở</span>
                                <span *ngSwitchCase="'VACANT'">Đang trống</span>
                                <span *ngSwitchCase="'NOTICE_GIVEN'">Đang báo kết thúc</span>
                                <span *ngSwitchCase="'CONTRACT_EXPIRING_SOON'">Sắp hết hạn hợp đồng</span>
                                <span *ngSwitchCase="'CONTRACT_OVERDUE'">Đã quá hạn hợp đồng</span>
                                <span *ngSwitchCase="'RESERVED'">Đang cọc giữ chỗ</span>
                                <span *ngSwitchCase="'PAYMENT_DUE'">Đang nợ tiền</span>
                                <span *ngSwitchDefault>Không xác định</span>
                            </td>
                            <td [ngSwitch]="room.financialStatus">
                                <span *ngSwitchCase="'BILLING_CYCLE'">Chu kỳ thu tiền</span>
                                <span *ngSwitchCase="'IN_COLLECTION'">Đang thu tiền</span>
                                <span *ngSwitchCase="'OVERDUE'">Quá hạn thanh toán</span>
                                <span *ngSwitchDefault>Không xác định</span>
                            </td>
                            <td>
                                <div class="dropdown">
                                    <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                        (mouseenter)="getCurrentRoom(room.roomId)" aria-expanded="false">
                                    </a>

                                    <ul class="dropdown-menu" style="top: 621px; right: 43px;">

                                        <li
                                            *ngIf="currentRoom?.status === 'VACANT' || currentRoom?.status === 'RESERVED'">
                                            <button class="mt-2 room_menu" data-bs-toggle="modal"
                                                (click)="openAddNewContractModal()" data-bs-target="#addNewContract"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><span class="text-success"><svg
                                                            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-book">
                                                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                                            <path
                                                                d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z">
                                                            </path>
                                                        </svg> Hợp đồng mới</span></div>
                                            </button>
                                        </li>
                                        <li
                                            *ngIf="currentRoom?.status === 'VACANT' || currentRoom?.status === 'RESERVED' || currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        class="feather feather-arrow-right-circle">
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <polyline points="12 16 16 12 12 8"></polyline>
                                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                                    </svg> Chi tiết giường</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'RESERVED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-eye">
                                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                        <circle cx="12" cy="12" r="3"></circle>
                                                    </svg> Xem cọc giữ chỗ</div>

                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'RESERVED'">
                                            <button class="mt-2 room_menu" (click)="getReservation()"
                                                data-bs-toggle="modal" data-bs-target="#cancelDeposit"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><span class="text-danger"><svg
                                                            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-x-circle">
                                                            <circle cx="12" cy="12" r="10"></circle>
                                                            <line x1="15" y1="9" x2="9" y2="15"></line>
                                                            <line x1="9" y1="9" x2="15" y2="15"></line>
                                                        </svg> Hủy cọc giữ chỗ
                                                    </span>
                                                </div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'VACANT'">
                                            <button class="mt-2 room_menu" data-bs-toggle="modal"
                                                data-bs-target="#cocGiuCho"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-anchor">
                                                        <circle cx="12" cy="5" r="3"></circle>
                                                        <line x1="12" y1="22" x2="12" y2="8"></line>
                                                        <path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>
                                                    </svg> Cọc giữ chỗ</div>
                                            </button>
                                        </li>
                                        <li>
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><span class="text-danger"><svg
                                                            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" class="feather feather-trash-2">
                                                            <polyline points="3 6 5 6 21 6"></polyline>
                                                            <path
                                                                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                                            </path>
                                                            <line x1="10" y1="11" x2="10" y2="17"></line>
                                                            <line x1="14" y1="11" x2="14" y2="17"></line>
                                                        </svg> Xóa giường</span></div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-dollar-sign">
                                                        <line x1="12" y1="1" x2="12" y2="23"></line>
                                                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6">
                                                        </path>
                                                    </svg> Lập hóa đơn</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-user">
                                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                                        <circle cx="12" cy="7" r="4"></circle>
                                                    </svg> Danh sách khách thuê</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-bell">
                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                                    </svg> Báo kết thúc hợp đồng</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-log-out">
                                                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                                        <polyline points="16 17 21 12 16 7"></polyline>
                                                        <line x1="21" y1="12" x2="9" y2="12"></line>
                                                    </svg> Kết thúc hợp đồng</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu" data-bs-toggle="modal"
                                                data-bs-target="#"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        class="feather feather-arrow-right-circle">
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <polyline points="12 16 16 12 12 8"></polyline>
                                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                                    </svg> Xem văn bản hợp đồng</div>
                                            </button>
                                        </li>
                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-truck">
                                                        <rect x="1" y="3" width="15" height="13"></rect>
                                                        <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                                                        <circle cx="5.5" cy="18.5" r="2.5"></circle>
                                                        <circle cx="18.5" cy="18.5" r="2.5"></circle>
                                                    </svg> Quản lý xe</div>
                                            </button>
                                        </li>

                                        <li
                                            *ngIf="currentRoom?.status === 'VACANT' || currentRoom?.status === 'RESERVED' || currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-settings">
                                                        <circle cx="12" cy="12" r="3"></circle>
                                                        <path
                                                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                                        </path>
                                                    </svg> Cài đặt dịch vụ</div>
                                            </button>
                                        </li>

                                        <li *ngIf="currentRoom?.status === 'OCCUPIED'">
                                            <button class="mt-2 room_menu" data-bs-toggle="modal"
                                                data-bs-target="#renewContract" (click)="getCurrentContract()"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><span class="text-success"><svg
                                                            xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                            stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round"
                                                            class="feather feather-external-link">
                                                            <path
                                                                d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6">
                                                            </path>
                                                            <polyline points="15 3 21 3 21 9"></polyline>
                                                            <line x1="10" y1="14" x2="21" y2="3"></line>
                                                        </svg> Gia hạn hợp đồng</span></div>
                                            </button>
                                        </li>

                                        <li>
                                            <button class="mt-2 room_menu"
                                                style="background-color: transparent; border:none; min-width: 300px; justify-items:left;">
                                                <div class="tabulator-menu-item"><svg xmlns="http://www.w3.org/2000/svg"
                                                        width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round" class="feather feather-trello">
                                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                                        <rect x="7" y="7" width="3" height="9"></rect>
                                                        <rect x="14" y="7" width="3" height="5"></rect>
                                                    </svg> Thiết lập tài sản</div>
                                            </button>

                                        </li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                    </ng-container>

                </tbody>
            </table>
        </div>
        <!-- end table list room -->

    </div>
</div>
<!-- end tab panes -->

<!-- Modal Tạo Phòng Trọ -->
<div class="modal fade" id="addRoom" tabindex="-1" aria-labelledby="addRoomModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addRoomModalLabel">Thêm Phòng Trọ Mới</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addRoomForm" (ngSubmit)="onCreateRoom()" #addRoomForm="ngForm">
                    <div class="row">
                        <!-- Tên phòng -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="roomName">Tên Phòng</label>
                            <input type="text" class="form-control" id="roomName" [(ngModel)]="room.roomName"
                                name="roomName" placeholder="Nhập tên phòng" required>
                        </div>

                        <!-- số tầng -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="area">số tầng</label>
                            <input type="number" class="form-control" id="floorNumber" [(ngModel)]="room.floorNumber"
                                name="floorNumber" placeholder="Nhập số tầng" required>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Giá Thuê -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="rentalPrice">Giá Thuê</label>
                            <input type="number" class="form-control" id="rentalPrice" [(ngModel)]="room.rentalPrice"
                                name="rentalPrice" placeholder="Nhập giá thuê" required>
                        </div>

                        <!-- Diện Tích -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="area">Diện Tích</label>
                            <input type="number" class="form-control" id="area" [(ngModel)]="room.area" name="area"
                                placeholder="Nhập diện tích" required>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Số Tiền Cọc -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="depositAmount">Số Tiền Cọc</label>
                            <input type="number" class="form-control" id="depositAmount"
                                [(ngModel)]="room.depositAmount" name="depositAmount" placeholder="Nhập số tiền cọc"
                                required>
                        </div>

                        <!-- Ngày Thanh Toán -->
                        <div class="form-group col-lg-6 p-2">
                            <label for="invoiceDate">Ngày Thanh Toán</label>
                            <input type="number" class="form-control" id="invoiceDate" [(ngModel)]="room.invoiceDate"
                                name="invoiceDate" required>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Số Người Tối Đa -->
                        <div class="form-group col-lg-4 p-2">
                            <label for="maxOccupants">Số Người Tối Đa</label>
                            <input type="number" class="form-control" id="maxOccupants" [(ngModel)]="room.maxOccupants"
                                name="maxOccupants" placeholder="Nhập số người tối đa" required>
                        </div>

                        <!-- Chu Kỳ Thanh Toán -->
                        <div class="form-group col-lg-4 p-2">
                            <label for="paymentCycle">Chu Kỳ Thanh Toán</label>
                            <select class="form-control" id="paymentCycle" [(ngModel)]="room.paymentCycle"
                                name="paymentCycle" required>
                                <option value=1>Hàng tháng</option>
                                <option value=3>Hàng quý</option>
                                <option value=12>Hàng năm</option>
                            </select>
                        </div>

                        <!-- Tình Trạng Phòng -->
                        <div class="form-group col-lg-4 p-2">
                            <label for="roomStatus">Tình Trạng Phòng</label>
                            <select class="form-control" id="roomStatus" [(ngModel)]="room.roomStatus" name="roomStatus"
                                required>
                                <option value="VACANT">Chưa cho thuê</option>
                                <option value="OCCUPIED">Đã cho thuê</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Tạo Phòng Trọ</button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal Tạo Phòng Trọ -->

<!-- Modal coc giu cho -->
<div class="modal fade" id="cocGiuCho" tabindex="-1" aria-labelledby="cocGiuChoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div
                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-anchor">
                        <circle cx="12" cy="5" r="3"></circle>
                        <line x1="12" y1="22" x2="12" y2="8"></line>
                        <path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>
                    </svg>
                </div>
                <h5 class="cocGiuChoModalLabel">Cọc giữ chỗ - {{currentRoom?.roomName}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>
            <div class="modal-body">
                <form class="needs-validation" (ngSubmit)="cocGiuChoSubmit()">
                    <div class="row g-2">
                        <!-- Ngày cọc giữ chỗ -->
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="date" class="form-control" name="reservationDate" id="reservationDate"
                                        placeholder="Nhập ngày cọc giữ chỗ" required
                                        [(ngModel)]="deposit_form.reservationDate">
                                    <label for="reservationDate">Ngày cọc giữ chỗ</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">
                                Ngày cọc giữ chỗ là yêu cầu và phải định dạng đúng
                            </div>
                        </div>

                        <!-- Ngày dự kiến vào ở -->
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="date" class="form-control" name="moveInDate" id="moveInDate"
                                        placeholder="Nhập ngày dự kiến ở" required
                                        [(ngModel)]="deposit_form.moveInDate">
                                    <label for="moveInDate">Ngày dự kiến vào ở</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">
                                Vui lòng nhập ngày dự kiến vào ở và ngày phải đúng định dạng
                            </div>
                        </div>

                        <!-- Tên người ở -->
                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="tenantName" id="tenantName"
                                    placeholder="Nhập tên người ở" required [(ngModel)]="deposit_form.tenantName">
                                <label for="tenantName">Tên người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập tên người ở
                                </div>
                            </div>
                        </div>

                        <!-- Số điện thoại người ở -->
                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="contactNumber" id="contactNumber"
                                    placeholder="Nhập sdt người ở" required [(ngModel)]="deposit_form.contactNumber">
                                <label for="contactNumber">Số điện thoại người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập số điện thoại người ở
                                </div>
                            </div>
                        </div>

                        <!-- Số tiền cọc giữ chỗ -->
                        <div class="col-12 mt-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="depositAmount" id="depositAmount"
                                    placeholder="Nhập số tiền cọc" required [(ngModel)]="deposit_form.depositAmount">
                                <label for="depositAmount">Số tiền cọc giữ chỗ (đ)</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập số tiền cọc giữ chỗ
                                </div>
                            </div>
                        </div>

                        <!-- Giá thuê hiện tại -->
                        <div class="col-12 mt-2">
                            <span>Giá thuê hiện tại</span>
                            <div class="room_amount" style="font-size: 16px;font-weight: bold;color: #3c9d46;">
                                {{currentRoom?.rentalPrice}}&nbsp;₫
                            </div>
                        </div>

                        <!-- Ghi chú -->
                        <div class="col-12 mt-4">
                            <div class="form-floating">
                                <textarea rows="10" style="min-height: 100px" class="form-control" name="notes"
                                    id="notes" placeholder="Nhập ghi chú" [(ngModel)]="deposit_form.notes"></textarea>
                                <label for="notes">Nhập ghi chú</label>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">Cọc giữ chỗ</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
<!--  -->

<!-- cancel deposit -->
<div class="modal fade" id="cancelDeposit" tabindex="-1" aria-labelledby="cancelDepositModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div
                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-anchor">
                        <circle cx="12" cy="5" r="3"></circle>
                        <line x1="12" y1="22" x2="12" y2="8"></line>
                        <path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>
                    </svg>
                </div>
                <h5 class="cancelDepositModalLabel">Hủy cọc giữ chỗ - {{currentRoom?.roomName}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>
            <div class="modal-body">
                <form class="needs-validation">
                    <div class="row g-2">
                        <!-- Ngày cọc giữ chỗ -->
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="reservationDate"
                                        id="reservationDate" placeholder="Nhập ngày cọc giữ chỗ"
                                        [value]="getFormattedDate(currentReservation?.reservationDate)" readonly>
                                    <label for="reservationDate">Ngày cọc giữ chỗ</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">
                                Ngày cọc giữ chỗ là yêu cầu và phải định dạng đúng
                            </div>
                        </div>

                        <!-- Ngày dự kiến vào ở -->
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="moveInDate" id="moveInDate"
                                        placeholder="Nhập ngày dự kiến ở"
                                        [value]="getFormattedDate(currentReservation?.moveInDate)" readonly>
                                    <label for="moveInDate">Ngày dự kiến vào ở</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">
                                Vui lòng nhập ngày dự kiến vào ở và ngày phải đúng định dạng
                            </div>
                        </div>

                        <!-- Tên người ở -->
                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="tenantName" id="tenantName"
                                    placeholder="Nhập tên người ở" [value]="currentReservation?.tenantName" readonly>
                                <label for="tenantName">Tên người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập tên người ở
                                </div>
                            </div>
                        </div>

                        <!-- Số điện thoại người ở -->
                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="contactNumber" id="contactNumber"
                                    placeholder="Nhập sdt người ở" [value]="currentReservation?.contactNumber" readonly>
                                <label for="contactNumber">Số điện thoại người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập số điện thoại người ở
                                </div>
                            </div>
                        </div>

                        <!-- Số tiền cọc giữ chỗ -->
                        <div class="col-12 mt-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="depositAmount" id="depositAmount"
                                    placeholder="Nhập số tiền cọc" [value]="currentReservation?.depositAmount" readonly>
                                <label for="depositAmount">Số tiền cọc giữ chỗ (đ)</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập số tiền cọc giữ chỗ
                                </div>
                            </div>
                        </div>

                        <!-- Giá thuê hiện tại -->
                        <div class="col-12 mt-2">
                            <span>Giá thuê hiện tại</span>
                            <div class="room_amount" style="font-size: 16px;font-weight: bold;color: #3c9d46;">
                                {{currentRoom?.rentalPrice}}&nbsp;₫
                            </div>
                        </div>

                        <!-- Ghi chú -->
                        <div class="col-12 mt-4">
                            <div class="form-floating">
                                <textarea rows="10" style="min-height: 100px" class="form-control" name="notes"
                                    id="notes" placeholder="Nhập ghi chú" [value]="currentReservation?.notes"
                                    readonly></textarea>
                                <label for="notes">Nhập ghi chú</label>
                            </div>
                        </div>

                        <div class="col-12 mt-2 deposit-refund" style="display: block;">
                            <div class="loz-alert warning mt-2 mb-2">
                                <div class="icon flex-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-info" size="20">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                    </svg>
                                </div>
                                <div class="des flex-1">
                                    <b>Chú thích:</b> Nếu bạn có hoàn trả lại cho khách số tiện cọc này hãy ghi nhập vào
                                    đây. Điều này sẽ ghi nhận trong thu/chi.
                                </div>
                            </div>
                            <div class="form-floating">
                                <input data-format="numeric" type="number" class="form-control"
                                    name="deposit_temp_amount_refund" id="deposit_temp_amount_refund"
                                    placeholder="Nhập số tiền cọc" min=0 [value]="currentReservation?.depositAmount">
                                <label for="deposit_temp_amount_refund">Số tiền cọc giữ chỗ hoàn trả (đ)</label>
                            </div>
                        </div>

                        <button type="button" (click)="cancelDeposit()" class="btn btn-primary">Hủy cọc giữ chỗ</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
<!--  -->

<!-- addContracts -->
<div class="modal fade" id="addNewContract" tabindex="-1" aria-labelledby="addNewContractModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div
                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-book">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                </div>
                <h5 class="modal-title">Thêm hợp đồng mới <span class="room-name">{{currentRoom?.roomName}}</span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="needs-validation" id="add-new-contract">
                    <div class="row g-2">
                        <div class="col-12">
                            <div class="title-has-icon">
                                <div class="icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-calendar">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                </div>
                                <div class="title-item-small">
                                    <b>Thời hạn hợp đồng</b>
                                    <i class="des">Dùng xác định ngày vào ở, văn bản hợp đồng...</i>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-floating">
                                <select data-format="numeric" id="contactDuration" name="contactDuration"
                                    [(ngModel)]="contractForm.contactDuration" class="form-select form-control">
                                    <option value="1">1 tháng</option>
                                    <option value="2">2 tháng</option>
                                    <option value="3">3 tháng</option>
                                    <option value="4">4 tháng</option>
                                    <option value="5">5 tháng</option>
                                    <option value="6">6 tháng</option>
                                    <option value="7">7 tháng</option>
                                    <option value="8">8 tháng</option>
                                    <option value="9">9 tháng</option>
                                    <option value="10">10 tháng</option>
                                    <option value="11">11 tháng</option>
                                    <option value="12">1 năm</option>
                                    <option value="18">1 năm, 6 tháng</option>
                                    <option value="24">2 năm</option>
                                    <option value="32">3 năm</option>
                                    <option value="48">4 năm</option>
                                    <option value="60">5 năm</option>
                                </select>
                                <label for="contactDuration">Thời hạn hợp đồng</label>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="moveInDate" id="moveInDate"
                                        placeholder="Nhập ngày ở" required [(ngModel)]="contractForm.moveInDate">
                                    <label for="moveInDate">Ngày vào ở</label>
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="terminationDate"
                                        id="terminationDate" placeholder="Nhập ngày kết thúc" required
                                        [(ngModel)]="contractForm.terminationDate">
                                    <label for="terminationDate">Ngày kết thúc</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="title-has-icon">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor"
                                        stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"
                                        class="css-i6dzq1">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="12" cy="7" r="4"></circle>
                                    </svg>
                                </div>
                                <div class="title-item-small">
                                    <b>Thông tin khách thuê</b>
                                    <i class="des">Dùng để làm tạm trú, văn bản hợp đồng...</i>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mt-2">
                            <div class="form-floating">
                                <input class="form-control" value="1" name="memberCount" min="1" id="memberCount"
                                    placeholder="Nhập số người ở" required [(ngModel)]="contractForm.memberCount">
                                <label for="memberCount">Số lượng thành viên</label>
                            </div>
                        </div>

                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="tenantName" id="tenantName"
                                    [(ngModel)]="contractForm.tenantName" placeholder="Nhập tên người ở" required>
                                <label for="tenantName">Tên người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập tên người ở
                                </div>
                            </div>
                        </div>

                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control phone" name="phoneNumber" id="phoneNumber"
                                    placeholder="Nhập sdt người ở" data-format="stringNumber" required
                                    [(ngModel)]="contractForm.phoneNumber">
                                <label for="phoneNumber">Số điện thoại người ở</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập sdt người ở
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control" name="idCard" id="idCard"
                                    placeholder="Nhập số CMND/CCCD" [(ngModel)]="contractForm.idCard">
                                <label id="label-identity-number" for="idCard">CMND/CCCD</label>
                                <div class="invalid-feedback">
                                    Vui nhập số CMND/CCCD của khách thuê
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" id="dob" name="dob"
                                        [(ngModel)]="contractForm.dob">
                                    <label for="birthday">Ngày sinh</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">
                                Vui lòng nhập này sinh và phải đúng định dạng
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-floating">
                                <select id="gender" name="gender" class="form-select form-control" required
                                    [(ngModel)]="contractForm.gender">
                                    <option value="MALE" selected="">Nam</option>
                                    <option value="FEMALE">Nữ</option>
                                </select>
                                <label for="gender">Giới tính</label>
                            </div>
                        </div>
                        <div class="collapse row g-2" id="collapseCustomerInCreateContract">
                            <!-- expand customers info -->
                            <!-- <div class="col-12">
                                <div id="contract_customer_address" class="address_component_container row g-2">
                                    <div class="col-6 mt-2">
                                        <div class="form-floating">
                                            <select data-format="numeric" name="address_component[province_id]"
                                                class="form-select form-control province">
                                                <option value="">Chọn Tỉnh/Thành phố</option>
                                                <option value="79">Thành phố Hồ Chí Minh</option>
                                                <option value="1">Thành phố Hà Nội</option>
                                                <option value="74">Tỉnh Bình Dương</option>
                                                <option value="92">Thành phố Cần Thơ</option>
                                                <option value="48">Thành phố Đà Nẵng</option>
                                                <option value="75">Tỉnh Đồng Nai</option>
                                                <option value="80">Long An</option>
                                                <option value="77">Bà Rịa - Vũng Tàu</option>
                                                <option value="56">Khánh Hòa</option>
                                                <option value="31">Hải Phòng</option>
                                                <option value="82">Tiền Giang</option>
                                                <option value="91">Kiên Giang</option>
                                                <option value="27">Bắc Ninh</option>
                                                <option value="89">An Giang</option>
                                                <option value="24">Bắc Giang</option>
                                                <option value="68">Lâm Đồng</option>
                                                <option value="70">Bình Phước</option>
                                                <option value="72">Tây Ninh</option>
                                                <option value="40">Nghệ An</option>
                                                <option value="33">Hưng Yên</option>
                                                <option value="66">Đắk Lắk</option>
                                                <option value="86">Vĩnh Long</option>
                                                <option value="87">Đồng Tháp</option>
                                                <option value="19">Thái Nguyên</option>
                                                <option value="84">Trà Vinh</option>
                                                <option value="83">Bến Tre</option>
                                                <option value="30">Hải Dương</option>
                                                <option value="96">Cà Mau</option>
                                                <option value="22">Quảng Ninh</option>
                                                <option value="46">Thừa Thiên Huế</option>
                                                <option value="60">Bình Thuận</option>
                                                <option value="52">Bình Định</option>
                                                <option value="26">Vĩnh Phúc</option>
                                                <option value="35">Hà Nam</option>
                                                <option value="51">Quảng Ngãi</option>
                                                <option value="25">Phú Thọ</option>
                                                <option value="38">Thanh Hóa</option>
                                                <option value="54">Phú Yên</option>
                                                <option value="94">Sóc Trăng</option>
                                                <option value="49">Quảng Nam</option>
                                                <option value="95">Bạc Liêu</option>
                                                <option value="64">Gia Lai</option>
                                                <option value="42">Hà Tĩnh</option>
                                                <option value="10">Lào Cai</option>
                                                <option value="20">Lạng Sơn</option>
                                                <option value="44">Quảng Bình</option>
                                                <option value="36">Nam Định</option>
                                                <option value="6">Bắc Kạn</option>
                                                <option value="37">Ninh Bình</option>
                                                <option value="93">Hậu Giang</option>
                                                <option value="2">Hà Giang</option>
                                                <option value="8">Tuyên Quang</option>
                                                <option value="34">Thái Bình</option>
                                                <option value="45">Quảng Trị</option>
                                                <option value="11">Điện Biên</option>
                                                <option value="12">Lai Châu</option>
                                                <option value="15">Yên Bái</option>
                                                <option value="17">Hoà Bình</option>
                                                <option value="58">Ninh Thuận</option>
                                                <option value="62">Kon Tum</option>
                                                <option value="67">Đắk Nông</option>
                                                <option value="4">Cao Bằng</option>
                                                <option value="14">Sơn La</option>
                                            </select>
                                            <label for="province">Chọn Tỉnh/Thành phố</label>
                                            <div class="invalid-feedback">
                                                Vui lòng chọn thành phố
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <div class="form-floating">
                                            <select data-format="numeric" name="address_component[district_id]"
                                                class="form-select form-control district">
                                                <option value="">Quận/Huyện</option>
                                            </select>
                                            <label for="district">Chọn Quận/Huyện</label>
                                            <div class="invalid-feedback">
                                                Vui lòng chọn quận hoặc huyện
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 mt-2">
                                        <div class="form-floating">
                                            <select data-format="numeric" name="address_component[ward_id]"
                                                class="form-select form-control ward">
                                                <option value="">Phường/Xã</option>
                                            </select>
                                            <label for="ward">Chọn Phường/Xã</label>
                                            <div class="invalid-feedback">
                                                Vui lòng chọn phường hoặc xã
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 mt-2">
                                        <div class="form-floating">
                                            <input type="text" class="form-control address_detail"
                                                name="address_component[address_detail]"
                                                placeholder="ví dụ: 122 - Đường Nguyễn Duy Trinh">
                                            <label for="address_detail">Địa chỉ chi tiết. Ví dụ: 122 - Đường Nguyễn Duy
                                                Trinh</label>
                                            <div class="invalid-feedback">
                                                Vui lòng nhập địa chỉ chi tiết
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- <div class="col-12 mt-2">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="job" id="customer_job"
                                        placeholder="Nhập công việc khách thuê">
                                    <label for="customer_job">Nhập công việc</label>
                                    <div class="invalid-feedback">
                                        Vui lòng nhập công việc của khách thuê
                                    </div>
                                </div>
                            </div> -->

                            <!-- <div class="col-6">
                                <div class="input-group">
                                    <div class="form-floating">
                                        <input type="text" class="form-control date-flat-picker flatpickr-input"
                                            name="identity_date" id="identity_date" data-format="date"
                                            placeholder="Ngày cấp " pattern="\d{1,2}\/\d{1,2}\/\d{4}">
                                        <label for="identity_date">Ngày cấp CMND/CCCD</label>
                                    </div>
                                    <label class="input-group-text" for="identity_date"><svg
                                            xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="feather feather-calendar">
                                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                            <line x1="16" y1="2" x2="16" y2="6"></line>
                                            <line x1="8" y1="2" x2="8" y2="6"></line>
                                            <line x1="3" y1="10" x2="21" y2="10"></line>
                                        </svg></label>
                                </div>
                                <div class="invalid-feedback">
                                    Vui lòng nhập ngày đúng định dạng
                                </div>
                            </div> -->

                            <!-- <div class="col-6">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="identity_place" id="identity_place"
                                        placeholder="Nhập số CMND/CCCD">
                                    <label for="identity_place">Nơi cấp CMND/CCCD</label>
                                    <div class="invalid-feedback">
                                        Vui nhập nơi cấp CMND/CCCD
                                    </div>
                                </div>
                            </div> -->

                            <!-- <div class="col-6 mt-2">
                                <div id="image_identity_before_ele" class="image-upload-simple" style="height: 100px;">
                                    <input type="file" style="display: none" name="image_identity_before"
                                        id="image_identity_before1733673148909" accept="image/*">
                                    <div class="container-upload">
                                        <div class="placeholder __add-more-imge"
                                            style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                            <div class="icon-upload" style="margin:auto"><svg
                                                    xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-upload-cloud">
                                                    <polyline points="16 16 12 12 8 16"></polyline>
                                                    <line x1="12" y1="12" x2="12" y2="21"></line>
                                                    <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>
                                                    <polyline points="16 16 12 12 8 16"></polyline>
                                                </svg></div><label style="text-decoration:underline"
                                                for="1733673148909">Ảnh mặt trước CMND/CCCD</label>
                                        </div>
                                        <div class="invalid-feedback">Vui nhập ảnh mặt trước cmnd/cccd</div>
                                        <div class="loading-image">Đang tải hình ảnh....</div>
                                    </div>
                                </div>
                            </div> -->

                            <!-- <div class="col-6 mt-2">
                                <div id="image_identity_after_ele" class="image-upload-simple" style="height: 100px;">
                                    <input type="file" style="display: none" name="image_identity_after"
                                        id="image_identity_after1733673148912" accept="image/*">
                                    <div class="container-upload">
                                        <div class="placeholder __add-more-imge"
                                            style="display: grid;cursor: pointer !important;width: 100%;align-items: center;justify-content: center;height: 100%;margin:-10px;">
                                            <div class="icon-upload" style="margin:auto"><svg
                                                    xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-upload-cloud">
                                                    <polyline points="16 16 12 12 8 16"></polyline>
                                                    <line x1="12" y1="12" x2="12" y2="21"></line>
                                                    <path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path>
                                                    <polyline points="16 16 12 12 8 16"></polyline>
                                                </svg></div><label style="text-decoration:underline"
                                                for="1733673148912">Ảnh mặt sau CMND/CCCD</label>
                                        </div>
                                        <div class="invalid-feedback">Vui nhập ảnh mặt sau cmnd/cccd</div>
                                        <div class="loading-image">Đang tải hình ảnh....</div>
                                    </div>
                                </div>
                            </div> -->
                            <!-- end expand -->
                        </div>
                        <a class="collapseCustomerInCreateContract"
                            style="text-align: center;color: #007bdd;text-decoration: underline;"
                            data-bs-toggle="collapse" href="#collapseCustomerInCreateContract" role="button"
                            aria-expanded="false" aria-controls="collapseExample">
                            <style>
                                .collapseCustomerInCreateContract[aria-expanded="false"] .open {
                                    display: block;
                                }

                                .collapseCustomerInCreateContract[aria-expanded="true"] .open {
                                    display: none;
                                }

                                .collapseCustomerInCreateContract[aria-expanded="false"] .hidden {
                                    display: none;
                                }

                                .collapseCustomerInCreateContract[aria-expanded="true"] .hidden {
                                    display: block;
                                }
                            </style>
                            <!-- <span class="open"><strong>Mở rộng thông tin khách thuê</strong></span>
                            <span class="hidden"><strong>Ẩn bớt thông tin khách thuê</strong></span> -->
                        </a>

                        <div class="col-12">
                            <div class="title-has-icon">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor"
                                        stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"
                                        class="css-i6dzq1">
                                        <path
                                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                        </path>
                                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                                    </svg>
                                </div>
                                <div class="title-item-small">
                                    <b>Dịch vụ sử dụng</b>
                                    <i class="des">Thêm dịch vụ sử dụng như: điện, nước, rác, wifi...</i>
                                </div>
                            </div>
                            <div class="price-items-checkout-layout">
                                <div class="item"
                                    *ngFor="let serviceCustom of contractForm.room.serviceCustoms; let i = index">
                                    <div class="item-check-name">
                                        <div class="row">
                                            <label for="serviceMetrics-{{i}}">
                                                <b>{{serviceCustom.service.serviceName}}</b>
                                                <p>Giá: <b>{{serviceCustom.service.servicePriceDefault}}</b> /
                                                    <span [ngSwitch]="serviceCustom.service.unitOfMeasurement">
                                                        <span *ngSwitchCase="'KWH'">kWh</span>
                                                        <span *ngSwitchCase="'PERSON'">người</span>
                                                        <span *ngSwitchCase="'MONTH'">tháng</span>
                                                        <span *ngSwitchCase="'PIECE'">cái</span>
                                                        <span *ngSwitchCase="'TIME'">lần</span>
                                                        <span *ngSwitchCase="'CUBIC_METER'">khối</span>
                                                        <span *ngSwitchCase="'UNIT'">đơn vị</span>
                                                        <span *ngSwitchDefault>{{
                                                            serviceCustom.service.unitOfMeasurement }}</span>
                                                    </span>
                                                </p>
                                            </label>

                                        </div>
                                    </div>
                                    <div>
                                        số hiện tại
                                        <input class="form-control" id="serviceMetrics-{{i}}" type="number"
                                            [(ngModel)]="serviceCustom.serviceMetrics" name="serviceMetrics-{{i}}" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="title-has-icon">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor"
                                        stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"
                                        class="css-i6dzq1">
                                        <path
                                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                                        </path>
                                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                                    </svg>
                                </div>
                                <div class="title-item-small">
                                    <b>Thông tin giá trị hợp đồng:</b>
                                    <i class="des">Giá tiền phòng và mức tiền cọc sẽ thu</i>
                                </div>
                            </div>
                        </div>

                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="text" class="form-control currency" name="rentalPrice" id="rentalPrice"
                                    data-format="numeric" min="0" placeholder="Nhập giá thuê" required
                                    [(ngModel)]="contractForm.room.rentalPrice">
                                <label for="rentalPrice">Giá thuê (đ)</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập giá thuê
                                </div>
                            </div>
                        </div>

                        <div class="col-6 mt-2">
                            <div class="form-floating">
                                <input type="number" class="form-control currency" name="depositAmount" min="0"
                                    id="depositAmount" [(ngModel)]="contractForm.room.depositAmount"
                                    placeholder="Nhập số tiền cọc" required>
                                <label for="depositAmount">Mức giá tiền cọc (đ)</label>
                                <div class="invalid-feedback">
                                    Vui lòng nhập số tiền cọc
                                </div>
                            </div>
                        </div>

                        <div class="col-12 deposit-contract-temp mt-2 mb-2" style="display: block;">
                            <div class="loz-alert warning">
                                <div class="icon flex-0">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" class="feather feather-info" size="20">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                    </svg>
                                </div>
                                <!-- <div class="des flex-1">
                                    Số tiền cọc giữ chỗ đã thu: <b class="deposit-contract-temp-paid"
                                        style="color:#ff5722">{{currentRoom?.reservation}}&nbsp;₫</b>
                                    <br><i>* Lưu ý: Số tiền này sẽ được chuyển thành tiền cọc sau khi bạn tạo hợp đồng
                                        này</i>
                                </div> -->
                            </div>
                        </div>

                        <div class="col-12 mt-2">
                            <div class="form-floating">
                                <input type="numeric" class="form-control" name="paymentDate"
                                    [(ngModel)]="contractForm.paymentDate" min="1" max="31" id="billingCycle"
                                    placeholder="Ngày thu" required>
                                <label for="paymentDate">Ngày thu tiền hàng tháng</label>
                            </div>
                        </div>

                        <div class="col-12 mt-2">
                            <div class="form-floating">
                                <textarea type="text" rows="10" style="min-height: 70px" class="form-control"
                                    name="notes" id="notes" placeholder="Ghi chú"
                                    [(ngModel)]="contractForm.notes"></textarea>
                                <label for="notes">Ghi chú</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer modal-footer--sticky">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" (click)="addNewContract()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-plus">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Thêm hợp đồng mới
                </button>
            </div>
        </div>
    </div>
</div>
<!--  -->
<!-- modal gia han hop dong -->
<div class="modal fade" id="renewContract" tabindex="-1" aria-labelledby="renewContractModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div
                    style="margin-right: 15px;outline: 0;box-shadow: 0 0 0 .25rem rgb(76 175 80 / 16%);opacity: 1;border-radius: 100%;width: 36px;height: 36px;justify-content: center;align-items: center;display: flex;background-color: #b1e1b8;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-log-out">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </div>
                <h5 class="modal-title">Gia hạn hợp đồng - Giường 1</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="needs-validation" id="extend-form" novalidate="">
                    <div class="row">
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="renewalDate" id="renewalDate"
                                        placeholder="Gia hạn đền ngày" required [(ngModel)]="reNewContractForm.renewalDate">
                                    <label for="renewalDate">Ngày gia hạn</label>
                                </div>
    
                            </div>
                            <div class="invalid-feedback">
                                Vui lòng nhập ngày gia hạn
                            </div>
                        </div>
    
                        <div class="col-6">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="datetime-local" class="form-control" name="renewalEndDate"
                                        id="renewalEndDate" placeholder="Gia hạn đền ngày" required
                                        [(ngModel)]="reNewContractForm.renewalEndDate">
                                    <label for="renewalEndDate">Gia hạn đến</label>
                                </div>
                               
                            </div>
                            <div class="invalid-feedback">
                                Vui lòng nhập ngày muốn gia hạn
                            </div>
                        </div>
                    </div>
                   
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="input-group">
                                <div class="form-floating">
                                    <input type="text" class="form-control currency" name="rentalPrice" id="rentalPrice"
                                        [value]="currentRoom?.rentalPrice" [(ngModel)]="reNewContractForm.rentPrice">
                                    <label for="rentalPrice">Giá thuê (đ)</label>
    
                                </div>
                            </div>
                        </div>
                    </div>

                  

                </form>
            </div>
            <div class="modal-footer modal-footer--sticky">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-primary" (click)="submitRenewContract()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-plus">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Gia hạn
                </button>
            </div>
        </div>
    </div>
</div>
<!--  -->